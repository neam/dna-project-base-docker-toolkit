# Dockerfile for PHP (FPM 7.1.8, HHVM 3.x.y) built for Debian PHP/Nginx base docker-stack
# ===============================================================
#   docker build -t neam/dna-project-base-debian-php:0.8.0-php7 .
#   docker push neam/dna-project-base-debian-php:0.8.0-php7

FROM neam/debian-php:fpm-7.1.8-hhvm-3.x.y-for-debian-php-nginx-stack

MAINTAINER Fredrik Wolls√©n <fredrik@neam.se>

# Update the below commented date time to match the time docker fetched the system package information - an update will trigger docker to fetch the information anew
RUN apt-get update && \
    apt-get upgrade -y -q # 2017-08-24 17:34

# Enable editors and general tools for administration processes
ENV TERM xterm
RUN apt-get install -y -q \
        curl \
        wget \
        gnupg \
        htop \
        less \
        jq \
        nano \
        man-db \
        lsb-release \
        sed \
        telnet \
        net-tools \
        vim

# For erb templates
RUN apt-get install -y -q \
        ruby-full

# Install s3cmd
RUN apt-get install -y -q s3cmd=1.6.1* || (echo "s3cmd \n $(apt-cache show s3cmd | grep -i version)" && exit 1)

# Install pipe viewer (pv) to monitor progress of commands that pipes large files
RUN apt-get install -y -q pv

# Install tmate for on-demand ssh access directly into containers
RUN apt-get install -y -q tmate

# Clean apt caches
RUN apt-get clean && \
    rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*
